{"remainingRequest":"/Users/jennadorsey/Desktop/nextlevel/node_modules/babel-loader/lib/index.js!/Users/jennadorsey/Desktop/nextlevel/node_modules/eslint-loader/index.js??ref--13-0!/Users/jennadorsey/Desktop/nextlevel/src/store/modules/event.js","dependencies":[{"path":"/Users/jennadorsey/Desktop/nextlevel/src/store/modules/event.js","mtime":1569801334476},{"path":"/Users/jennadorsey/Desktop/nextlevel/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jennadorsey/Desktop/nextlevel/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/jennadorsey/Desktop/nextlevel/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.array.find\";\nimport EventService from '@/services/EventService.js';\nexport var namespaced = true;\nexport var state = {\n  events: [],\n  eventsTotal: 0,\n  event: {}\n};\nexport var mutations = {\n  ADD_EVENT: function ADD_EVENT(state, event) {\n    state.events.push(event);\n  },\n  SET_EVENTS: function SET_EVENTS(state, events) {\n    state.events = events;\n  },\n  SET_EVENTS_TOTAL: function SET_EVENTS_TOTAL(state, eventsTotal) {\n    state.eventsTotal = eventsTotal;\n  },\n  SET_EVENT: function SET_EVENT(state, event) {\n    state.event = event;\n  }\n};\nexport var actions = {\n  createEvent: function createEvent(_ref, event) {\n    var commit = _ref.commit,\n        dispatch = _ref.dispatch;\n    return EventService.postEvent(event).then(function () {\n      commit('ADD_EVENT', event);\n      var notification = {\n        type: 'success',\n        message: 'Your event has been created!'\n      };\n      dispatch('notification/add', notification, {\n        root: true\n      });\n    }).catch(function (error) {\n      var notification = {\n        type: 'error',\n        message: 'There was a problem creating your event: ' + error.message\n      };\n      dispatch('notification/add', notification, {\n        root: true\n      });\n      throw error;\n    });\n  },\n  fetchEvents: function fetchEvents(_ref2, _ref3) {\n    var commit = _ref2.commit,\n        dispatch = _ref2.dispatch;\n    var perPage = _ref3.perPage,\n        page = _ref3.page;\n    EventService.getEvents(perPage, page).then(function (response) {\n      commit('SET_EVENTS_TOTAL', parseInt(response.headers['x-total-count']));\n      commit('SET_EVENTS', response.data);\n    }).catch(function (error) {\n      var notification = {\n        type: 'error',\n        message: 'There was a problem fetching events: ' + error.message\n      };\n      dispatch('notification/add', notification, {\n        root: true\n      });\n    });\n  },\n  fetchEvent: function fetchEvent(_ref4, id) {\n    var commit = _ref4.commit,\n        getters = _ref4.getters,\n        state = _ref4.state;\n\n    if (id == state.event.id) {\n      return state.event;\n    }\n\n    var event = getters.getEventById(id);\n\n    if (event) {\n      commit('SET_EVENT', event);\n      return event;\n    } else {\n      return EventService.getEvent(id).then(function (response) {\n        commit('SET_EVENT', response.data);\n        return response.data;\n      });\n    }\n  }\n};\nexport var getters = {\n  getEventById: function getEventById(state) {\n    return function (id) {\n      return state.events.find(function (event) {\n        return event.id === id;\n      });\n    };\n  }\n};",{"version":3,"sources":["/Users/jennadorsey/Desktop/nextlevel/src/store/modules/event.js"],"names":["EventService","namespaced","state","events","eventsTotal","event","mutations","ADD_EVENT","push","SET_EVENTS","SET_EVENTS_TOTAL","SET_EVENT","actions","createEvent","commit","dispatch","postEvent","then","notification","type","message","root","catch","error","fetchEvents","perPage","page","getEvents","response","parseInt","headers","data","fetchEvent","id","getters","getEventById","getEvent","find"],"mappings":"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","sourcesContent":["import EventService from '@/services/EventService.js'\n\nexport const namespaced = true\n\nexport const state = {\n  events: [],\n  eventsTotal: 0,\n  event: {}\n}\n\nexport const mutations = {\n  ADD_EVENT(state, event) {\n    state.events.push(event)\n  },\n  SET_EVENTS(state, events) {\n    state.events = events\n  },\n  SET_EVENTS_TOTAL(state, eventsTotal) {\n    state.eventsTotal = eventsTotal\n  },\n  SET_EVENT(state, event) {\n    state.event = event\n  }\n}\n\nexport const actions = {\n  createEvent({ commit, dispatch }, event) {\n    return EventService.postEvent(event)\n      .then(() => {\n        commit('ADD_EVENT', event)\n        const notification = {\n          type: 'success',\n          message: 'Your event has been created!'\n        }\n        dispatch('notification/add', notification, { root: true })\n      })\n      .catch(error => {\n        const notification = {\n          type: 'error',\n          message: 'There was a problem creating your event: ' + error.message\n        }\n        dispatch('notification/add', notification, { root: true })\n        throw error\n      })\n  },\n  fetchEvents({ commit, dispatch }, { perPage, page }) {\n    EventService.getEvents(perPage, page)\n      .then(response => {\n        commit('SET_EVENTS_TOTAL', parseInt(response.headers['x-total-count']))\n        commit('SET_EVENTS', response.data)\n      })\n      .catch(error => {\n        const notification = {\n          type: 'error',\n          message: 'There was a problem fetching events: ' + error.message\n        }\n        dispatch('notification/add', notification, { root: true })\n      })\n  },\n  fetchEvent({ commit, getters, state }, id) {\n    if (id == state.event.id) {\n      return state.event\n    }\n    var event = getters.getEventById(id)\n    if (event) {\n      commit('SET_EVENT', event)\n      return event\n    } else {\n      return EventService.getEvent(id).then(response => {\n        commit('SET_EVENT', response.data)\n        return response.data\n      })\n    }\n  }\n}\nexport const getters = {\n  getEventById: state => id => {\n    return state.events.find(event => event.id === id)\n  }\n}\n"]}]}